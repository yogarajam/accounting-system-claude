<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Double Entry Accounting System - Complete Documentation</title>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --text-color: #1f2937;
            --text-muted: #6b7280;
            --bg-color: #f9fafb;
            --card-bg: #ffffff;
            --border-color: #e5e7eb;
            --code-bg: #1f2937;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 280px;
            background: var(--card-bg);
            border-right: 1px solid var(--border-color);
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            padding: 20px 0;
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .sidebar-header h1 {
            font-size: 1.25rem;
            color: var(--primary-color);
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .nav-section {
            margin-bottom: 20px;
        }

        .nav-section-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
            padding: 0 20px;
            margin-bottom: 8px;
        }

        .nav-link {
            display: block;
            padding: 8px 20px;
            color: var(--text-color);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background: var(--bg-color);
            color: var(--primary-color);
        }

        .nav-link.active {
            background: #eff6ff;
            color: var(--primary-color);
            border-right: 3px solid var(--primary-color);
        }

        /* Main Content */
        .main-content {
            margin-left: 280px;
            flex: 1;
            padding: 40px 60px;
            max-width: calc(100% - 280px);
        }

        .section {
            margin-bottom: 60px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--text-color);
        }

        h2 {
            font-size: 1.875rem;
            margin-bottom: 16px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            color: var(--text-color);
        }

        h3 {
            font-size: 1.5rem;
            margin: 24px 0 12px;
            color: var(--text-color);
        }

        h4 {
            font-size: 1.25rem;
            margin: 20px 0 10px;
            color: var(--text-color);
        }

        p {
            margin-bottom: 16px;
            color: var(--text-color);
        }

        /* Cards */
        .card {
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            padding: 24px;
            margin-bottom: 20px;
        }

        .card-header {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        /* Code blocks */
        pre {
            background: var(--code-bg);
            color: #e5e7eb;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 16px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        code {
            background: #e5e7eb;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.875rem;
            color: var(--danger-color);
        }

        pre code {
            background: transparent;
            padding: 0;
            color: inherit;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            background: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--bg-color);
            font-weight: 600;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-muted);
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:hover {
            background: var(--bg-color);
        }

        /* Lists */
        ul, ol {
            margin: 16px 0;
            padding-left: 24px;
        }

        li {
            margin-bottom: 8px;
        }

        /* Alerts */
        .alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin: 16px 0;
            border-left: 4px solid;
        }

        .alert-info {
            background: #eff6ff;
            border-color: var(--primary-color);
            color: var(--secondary-color);
        }

        .alert-success {
            background: #ecfdf5;
            border-color: var(--success-color);
            color: #065f46;
        }

        .alert-warning {
            background: #fffbeb;
            border-color: var(--warning-color);
            color: #92400e;
        }

        .alert-danger {
            background: #fef2f2;
            border-color: var(--danger-color);
            color: #991b1b;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-primary {
            background: #dbeafe;
            color: var(--primary-color);
        }

        .badge-success {
            background: #d1fae5;
            color: #065f46;
        }

        .badge-warning {
            background: #fef3c7;
            color: #92400e;
        }

        /* Architecture Diagram */
        .architecture-diagram {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }

        .layer {
            background: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
        }

        .layer-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .components {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .component {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 0.875rem;
        }

        .arrow {
            font-size: 1.5rem;
            color: var(--text-muted);
            margin: 5px 0;
        }

        /* ERD Styles */
        .erd-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .entity {
            background: var(--card-bg);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .entity-header {
            background: var(--primary-color);
            color: white;
            padding: 10px 15px;
            font-weight: 600;
        }

        .entity-body {
            padding: 15px;
        }

        .entity-field {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 0.875rem;
            border-bottom: 1px dashed var(--border-color);
        }

        .entity-field:last-child {
            border-bottom: none;
        }

        .field-name {
            font-weight: 500;
        }

        .field-type {
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        .pk {
            color: var(--warning-color);
        }

        .fk {
            color: var(--primary-color);
        }

        /* Flowchart */
        .flowchart {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px;
        }

        .flow-step {
            background: var(--primary-color);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            min-width: 200px;
            text-align: center;
        }

        .flow-step.alt {
            background: var(--success-color);
        }

        .flow-arrow {
            font-size: 1.5rem;
            color: var(--text-muted);
        }

        /* Print styles */
        @media print {
            .sidebar {
                display: none;
            }

            .main-content {
                margin-left: 0;
                max-width: 100%;
            }

            .section {
                page-break-inside: avoid;
            }
        }

        /* TOC in content */
        .toc {
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 40px;
        }

        .toc h3 {
            margin-top: 0;
        }

        .toc-list {
            list-style: none;
            padding-left: 0;
        }

        .toc-list li {
            margin: 8px 0;
        }

        .toc-list a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .toc-list a:hover {
            text-decoration: underline;
        }

        .toc-list ul {
            padding-left: 20px;
            margin: 4px 0;
        }
    </style>
</head>
<body>
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <h1>Accounting System</h1>
            <p>Documentation v1.0.0</p>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Getting Started</div>
            <a href="#overview" class="nav-link">Overview</a>
            <a href="#quick-start" class="nav-link">Quick Start</a>
            <a href="#installation" class="nav-link">Installation</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">User Manual</div>
            <a href="#login" class="nav-link">Login & Authentication</a>
            <a href="#dashboard" class="nav-link">Dashboard</a>
            <a href="#chart-of-accounts" class="nav-link">Chart of Accounts</a>
            <a href="#journal-entries" class="nav-link">Journal Entries</a>
            <a href="#invoicing" class="nav-link">Invoicing</a>
            <a href="#reports" class="nav-link">Financial Reports</a>
            <a href="#bank-reconciliation" class="nav-link">Bank Reconciliation</a>
            <a href="#user-management" class="nav-link">User Management</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Development Guide</div>
            <a href="#architecture" class="nav-link">Architecture</a>
            <a href="#design-patterns" class="nav-link">Design Patterns</a>
            <a href="#database-schema" class="nav-link">Database Schema</a>
            <a href="#api-reference" class="nav-link">API Reference</a>
            <a href="#code-structure" class="nav-link">Code Structure</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Operations</div>
            <a href="#configuration" class="nav-link">Configuration</a>
            <a href="#deployment" class="nav-link">Deployment</a>
            <a href="#maintenance" class="nav-link">Maintenance</a>
            <a href="#troubleshooting" class="nav-link">Troubleshooting</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Overview Section -->
        <section id="overview" class="section">
            <h1>Double Entry Accounting System</h1>
            <p class="lead" style="font-size: 1.25rem; color: var(--text-muted);">
                A comprehensive web-based double-entry accounting system designed for small to medium businesses.
            </p>

            <div class="card">
                <div class="card-header">Key Features</div>
                <ul>
                    <li><strong>Double-Entry Bookkeeping</strong> - Full support for debit and credit accounting</li>
                    <li><strong>Chart of Accounts</strong> - Flexible account structure with hierarchical support</li>
                    <li><strong>Journal Entries</strong> - Create, post, and void journal entries with validation</li>
                    <li><strong>Financial Reports</strong> - Trial Balance, Profit & Loss, Balance Sheet, General Ledger</li>
                    <li><strong>Invoicing</strong> - Customer management and invoice generation</li>
                    <li><strong>Bank Reconciliation</strong> - Import statements and match transactions</li>
                    <li><strong>User Management</strong> - Role-based access control (Admin, Accountant, Viewer)</li>
                    <li><strong>Multi-Currency Support</strong> - Track transactions in multiple currencies</li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">Technology Stack</div>
                <table>
                    <tr>
                        <th>Component</th>
                        <th>Technology</th>
                        <th>Version</th>
                    </tr>
                    <tr>
                        <td>Backend Framework</td>
                        <td>Spring Boot</td>
                        <td>3.2.0</td>
                    </tr>
                    <tr>
                        <td>Java Version</td>
                        <td>Java</td>
                        <td>17</td>
                    </tr>
                    <tr>
                        <td>Template Engine</td>
                        <td>Thymeleaf</td>
                        <td>3.x</td>
                    </tr>
                    <tr>
                        <td>Database (Production)</td>
                        <td>MySQL</td>
                        <td>8.x</td>
                    </tr>
                    <tr>
                        <td>Database (Development)</td>
                        <td>H2</td>
                        <td>2.x</td>
                    </tr>
                    <tr>
                        <td>ORM</td>
                        <td>Hibernate/JPA</td>
                        <td>6.3.x</td>
                    </tr>
                    <tr>
                        <td>Security</td>
                        <td>Spring Security</td>
                        <td>6.x</td>
                    </tr>
                    <tr>
                        <td>Build Tool</td>
                        <td>Maven</td>
                        <td>3.x</td>
                    </tr>
                </table>
            </div>
        </section>

        <!-- Quick Start Section -->
        <section id="quick-start" class="section">
            <h2>Quick Start</h2>

            <h3>Prerequisites</h3>
            <ul>
                <li>Java 17 or higher installed</li>
                <li>Maven 3.6+ installed</li>
                <li>MySQL 8.x (for production) or H2 (included for development)</li>
            </ul>

            <h3>Running the Application</h3>
            <div class="alert alert-info">
                The application comes pre-configured to use H2 database for easy development setup.
            </div>

            <h4>Step 1: Clone/Download the Project</h4>
            <pre><code>cd /path/to/accounting-system</code></pre>

            <h4>Step 2: Run with Maven</h4>
            <pre><code>mvn spring-boot:run</code></pre>

            <h4>Step 3: Access the Application</h4>
            <p>Open your browser and navigate to:</p>
            <ul>
                <li><strong>Application:</strong> <a href="http://localhost:8080">http://localhost:8080</a></li>
                <li><strong>H2 Console:</strong> <a href="http://localhost:8080/h2-console">http://localhost:8080/h2-console</a></li>
            </ul>

            <h4>Default Credentials</h4>
            <table>
                <tr>
                    <th>Username</th>
                    <th>Password</th>
                    <th>Role</th>
                </tr>
                <tr>
                    <td>admin</td>
                    <td>admin</td>
                    <td>Administrator</td>
                </tr>
            </table>
        </section>

        <!-- Installation Section -->
        <section id="installation" class="section">
            <h2>Installation Guide</h2>

            <h3>Development Environment</h3>
            <p>For development, the application uses an embedded H2 database by default.</p>

            <pre><code># 1. Navigate to project directory
cd accounting-system

# 2. Build the project
mvn clean install

# 3. Run the application
mvn spring-boot:run

# Or run the JAR directly
java -jar target/accounting-system-1.0.0-SNAPSHOT.jar</code></pre>

            <h3>Production Environment (MySQL)</h3>

            <h4>Step 1: Create MySQL Database</h4>
            <pre><code>CREATE DATABASE accounting_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
CREATE USER 'accounting_user'@'localhost' IDENTIFIED BY 'your_secure_password';
GRANT ALL PRIVILEGES ON accounting_db.* TO 'accounting_user'@'localhost';
FLUSH PRIVILEGES;</code></pre>

            <h4>Step 2: Configure application.properties</h4>
            <pre><code># Comment out H2 configuration and enable MySQL:

# MySQL Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/accounting_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=accounting_user
spring.datasource.password=your_secure_password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# Disable H2 console in production
spring.h2.console.enabled=false</code></pre>

            <h4>Step 3: Build and Deploy</h4>
            <pre><code># Build production JAR
mvn clean package -DskipTests

# Run with production profile
java -jar target/accounting-system-1.0.0-SNAPSHOT.jar --spring.profiles.active=production</code></pre>
        </section>

        <!-- User Manual - Login Section -->
        <section id="login" class="section">
            <h2>Login & Authentication</h2>

            <h3>Accessing the System</h3>
            <p>Navigate to the application URL. If you're not logged in, you'll be redirected to the login page.</p>

            <h3>User Roles</h3>
            <table>
                <tr>
                    <th>Role</th>
                    <th>Permissions</th>
                </tr>
                <tr>
                    <td><span class="badge badge-primary">ADMIN</span></td>
                    <td>Full access to all features including user management, all journal operations, and system configuration</td>
                </tr>
                <tr>
                    <td><span class="badge badge-success">ACCOUNTANT</span></td>
                    <td>Create, edit, post, and void journal entries. Manage accounts, invoices, and perform bank reconciliation</td>
                </tr>
                <tr>
                    <td><span class="badge badge-warning">VIEWER</span></td>
                    <td>View-only access to dashboard, accounts, journal entries, and reports</td>
                </tr>
            </table>

            <h3>Security Features</h3>
            <ul>
                <li>BCrypt password encryption</li>
                <li>Session-based authentication</li>
                <li>CSRF protection enabled</li>
                <li>Role-based access control on all endpoints</li>
                <li>Automatic session invalidation on logout</li>
            </ul>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section">
            <h2>Dashboard</h2>

            <p>The dashboard provides a real-time overview of your financial position.</p>

            <h3>Key Metrics Displayed</h3>
            <table>
                <tr>
                    <th>Metric</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Total Assets</td>
                    <td>Sum of all asset account balances</td>
                </tr>
                <tr>
                    <td>Total Liabilities</td>
                    <td>Sum of all liability account balances</td>
                </tr>
                <tr>
                    <td>Total Equity</td>
                    <td>Sum of all equity account balances</td>
                </tr>
                <tr>
                    <td>Net Income (YTD)</td>
                    <td>Revenue minus expenses for the current year</td>
                </tr>
                <tr>
                    <td>Cash Balance</td>
                    <td>Current balance in the main cash account (1000)</td>
                </tr>
                <tr>
                    <td>Accounts Receivable</td>
                    <td>Outstanding customer balances (1200)</td>
                </tr>
                <tr>
                    <td>Accounts Payable</td>
                    <td>Outstanding vendor balances (2000)</td>
                </tr>
                <tr>
                    <td>Pending Entries</td>
                    <td>Number of journal entries in draft status</td>
                </tr>
            </table>

            <h3>Quick Actions</h3>
            <ul>
                <li><strong>New Journal Entry</strong> - Create a new journal entry</li>
                <li><strong>Create Invoice</strong> - Generate a customer invoice</li>
                <li><strong>Trial Balance</strong> - View the trial balance report</li>
                <li><strong>Profit & Loss</strong> - View the income statement</li>
            </ul>
        </section>

        <!-- Chart of Accounts Section -->
        <section id="chart-of-accounts" class="section">
            <h2>Chart of Accounts</h2>

            <h3>Account Types</h3>
            <p>The system supports five fundamental account types following standard accounting principles:</p>

            <table>
                <tr>
                    <th>Type</th>
                    <th>Normal Balance</th>
                    <th>Statement</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td><strong>ASSET</strong></td>
                    <td>Debit</td>
                    <td>Balance Sheet</td>
                    <td>Resources owned by the business (Cash, Receivables, Equipment)</td>
                </tr>
                <tr>
                    <td><strong>LIABILITY</strong></td>
                    <td>Credit</td>
                    <td>Balance Sheet</td>
                    <td>Obligations owed to others (Payables, Loans)</td>
                </tr>
                <tr>
                    <td><strong>EQUITY</strong></td>
                    <td>Credit</td>
                    <td>Balance Sheet</td>
                    <td>Owner's interest (Capital, Retained Earnings)</td>
                </tr>
                <tr>
                    <td><strong>REVENUE</strong></td>
                    <td>Credit</td>
                    <td>Income Statement</td>
                    <td>Income from business activities (Sales, Service Revenue)</td>
                </tr>
                <tr>
                    <td><strong>EXPENSE</strong></td>
                    <td>Debit</td>
                    <td>Income Statement</td>
                    <td>Costs of operations (Rent, Salaries, Utilities)</td>
                </tr>
            </table>

            <h3>Managing Accounts</h3>

            <h4>Creating a New Account</h4>
            <ol>
                <li>Navigate to <strong>Accounts</strong> in the main menu</li>
                <li>Click <strong>New Account</strong></li>
                <li>Fill in the required fields:
                    <ul>
                        <li><strong>Code</strong> - Unique identifier (e.g., 1000, 1100)</li>
                        <li><strong>Name</strong> - Descriptive name</li>
                        <li><strong>Type</strong> - Select from Asset, Liability, Equity, Revenue, Expense</li>
                        <li><strong>Parent Account</strong> - Optional, for hierarchical structure</li>
                        <li><strong>Currency</strong> - Optional, defaults to base currency</li>
                    </ul>
                </li>
                <li>Click <strong>Save</strong></li>
            </ol>

            <h4>Account Code Conventions</h4>
            <table>
                <tr>
                    <th>Range</th>
                    <th>Type</th>
                    <th>Examples</th>
                </tr>
                <tr>
                    <td>1000-1999</td>
                    <td>Assets</td>
                    <td>1000 Cash, 1200 Accounts Receivable</td>
                </tr>
                <tr>
                    <td>2000-2999</td>
                    <td>Liabilities</td>
                    <td>2000 Accounts Payable, 2100 Notes Payable</td>
                </tr>
                <tr>
                    <td>3000-3999</td>
                    <td>Equity</td>
                    <td>3000 Capital, 3100 Retained Earnings</td>
                </tr>
                <tr>
                    <td>4000-4999</td>
                    <td>Revenue</td>
                    <td>4000 Sales Revenue, 4100 Service Revenue</td>
                </tr>
                <tr>
                    <td>5000-5999</td>
                    <td>Expenses</td>
                    <td>5000 Cost of Goods Sold, 5100 Salaries</td>
                </tr>
            </table>

            <h4>Deactivating Accounts</h4>
            <div class="alert alert-warning">
                Accounts can only be deactivated if they have a zero balance. This prevents orphaning of transactions.
            </div>
        </section>

        <!-- Journal Entries Section -->
        <section id="journal-entries" class="section">
            <h2>Journal Entries</h2>

            <h3>Understanding Journal Entries</h3>
            <p>Journal entries are the foundation of double-entry bookkeeping. Every transaction must have equal debits and credits.</p>

            <h3>Entry Status Lifecycle</h3>
            <div class="flowchart">
                <div class="flow-step">DRAFT</div>
                <div class="flow-arrow">&#8595;</div>
                <div class="flow-step alt">POSTED</div>
                <div class="flow-arrow">&#8595;</div>
                <div class="flow-step" style="background: var(--danger-color);">VOID</div>
            </div>

            <table>
                <tr>
                    <th>Status</th>
                    <th>Description</th>
                    <th>Allowed Actions</th>
                </tr>
                <tr>
                    <td><span class="badge badge-warning">DRAFT</span></td>
                    <td>Entry created but not yet recorded in accounts</td>
                    <td>Edit, Delete, Post</td>
                </tr>
                <tr>
                    <td><span class="badge badge-success">POSTED</span></td>
                    <td>Entry recorded and affecting account balances</td>
                    <td>Void</td>
                </tr>
                <tr>
                    <td><span class="badge badge-primary">VOID</span></td>
                    <td>Entry reversed, no longer affecting balances</td>
                    <td>None (read-only)</td>
                </tr>
            </table>

            <h3>Creating a Journal Entry</h3>
            <ol>
                <li>Navigate to <strong>Journal</strong> &gt; <strong>New Entry</strong></li>
                <li>Enter the entry details:
                    <ul>
                        <li><strong>Date</strong> - Transaction date</li>
                        <li><strong>Description</strong> - Explanation of the transaction</li>
                        <li><strong>Reference</strong> - Optional external reference number</li>
                    </ul>
                </li>
                <li>Add line items (minimum 2 required):
                    <ul>
                        <li>Select account</li>
                        <li>Enter debit OR credit amount (not both)</li>
                        <li>Optional line description</li>
                    </ul>
                </li>
                <li>Verify totals balance (Debits = Credits)</li>
                <li>Click <strong>Save</strong> to create as draft</li>
            </ol>

            <h3>Entry Validation Rules</h3>
            <ul>
                <li>Minimum 2 lines required</li>
                <li>Total debits must equal total credits</li>
                <li>Total amount must be greater than zero</li>
                <li>Each line must have either a debit or credit (not both)</li>
                <li>Cannot use inactive accounts</li>
            </ul>

            <h3>Entry Number Format</h3>
            <p>Entry numbers are auto-generated in the format: <code>JE-YYYYMM-NNNN</code></p>
            <p>Example: <code>JE-202401-0001</code></p>
        </section>

        <!-- Invoicing Section -->
        <section id="invoicing" class="section">
            <h2>Invoicing</h2>

            <h3>Invoice Workflow</h3>
            <div class="flowchart">
                <div class="flow-step">Create Draft</div>
                <div class="flow-arrow">&#8595;</div>
                <div class="flow-step">Send Invoice</div>
                <div class="flow-arrow">&#8595;</div>
                <div class="flow-step" style="background: var(--warning-color);">Overdue (auto)</div>
                <div class="flow-arrow">&#8595;</div>
                <div class="flow-step alt">Mark as Paid</div>
            </div>

            <h3>Invoice Statuses</h3>
            <table>
                <tr>
                    <th>Status</th>
                    <th>Description</th>
                    <th>Actions</th>
                </tr>
                <tr>
                    <td>DRAFT</td>
                    <td>Invoice created, not yet sent</td>
                    <td>Edit, Send, Cancel</td>
                </tr>
                <tr>
                    <td>SENT</td>
                    <td>Invoice sent to customer</td>
                    <td>Mark as Paid, Cancel</td>
                </tr>
                <tr>
                    <td>OVERDUE</td>
                    <td>Past due date, not paid</td>
                    <td>Mark as Paid, Cancel</td>
                </tr>
                <tr>
                    <td>PAID</td>
                    <td>Payment received</td>
                    <td>None (final state)</td>
                </tr>
                <tr>
                    <td>CANCELLED</td>
                    <td>Invoice voided</td>
                    <td>None (final state)</td>
                </tr>
            </table>

            <h3>Automatic Journal Entries</h3>
            <p>When an invoice is sent, the system automatically creates a journal entry:</p>
            <pre><code>Debit:  1200 Accounts Receivable    $X,XXX.XX
Credit: 4000 Sales Revenue          $X,XXX.XX</code></pre>

            <p>When payment is received:</p>
            <pre><code>Debit:  1000 Cash                   $X,XXX.XX
Credit: 1200 Accounts Receivable    $X,XXX.XX</code></pre>

            <h3>Customer Management</h3>
            <p>Before creating invoices, you need to set up customers:</p>
            <ol>
                <li>Navigate to <strong>Invoices</strong> &gt; <strong>Customers</strong></li>
                <li>Click <strong>New Customer</strong></li>
                <li>Enter customer details (Code, Name, Email, Address, Tax ID)</li>
                <li>Save the customer</li>
            </ol>
        </section>

        <!-- Reports Section -->
        <section id="reports" class="section">
            <h2>Financial Reports</h2>

            <h3>Available Reports</h3>

            <div class="card">
                <div class="card-header">Trial Balance</div>
                <p>Lists all accounts with their debit and credit balances as of a specific date.</p>
                <ul>
                    <li>Verifies that total debits equal total credits</li>
                    <li>Shows accounts with non-zero balances</li>
                    <li>Grouped by account type</li>
                </ul>
                <p><strong>URL:</strong> <code>/reports/trial-balance?asOfDate=YYYY-MM-DD</code></p>
            </div>

            <div class="card">
                <div class="card-header">Profit & Loss (Income Statement)</div>
                <p>Shows revenues and expenses for a specified period, calculating net income.</p>
                <ul>
                    <li>Revenue accounts listed first</li>
                    <li>Expense accounts listed second</li>
                    <li>Net Income = Total Revenue - Total Expenses</li>
                </ul>
                <p><strong>URL:</strong> <code>/reports/profit-loss?startDate=YYYY-MM-DD&endDate=YYYY-MM-DD</code></p>
            </div>

            <div class="card">
                <div class="card-header">Balance Sheet</div>
                <p>Shows the financial position (Assets = Liabilities + Equity) as of a specific date.</p>
                <ul>
                    <li>Assets section</li>
                    <li>Liabilities section</li>
                    <li>Equity section (includes YTD retained earnings)</li>
                </ul>
                <p><strong>URL:</strong> <code>/reports/balance-sheet?asOfDate=YYYY-MM-DD</code></p>
            </div>

            <div class="card">
                <div class="card-header">General Ledger</div>
                <p>Detailed transaction history for a specific account.</p>
                <ul>
                    <li>Opening balance</li>
                    <li>Each posted transaction with running balance</li>
                    <li>Closing balance</li>
                </ul>
                <p><strong>URL:</strong> <code>/reports/general-ledger?accountId=X&startDate=YYYY-MM-DD&endDate=YYYY-MM-DD</code></p>
            </div>
        </section>

        <!-- Bank Reconciliation Section -->
        <section id="bank-reconciliation" class="section">
            <h2>Bank Reconciliation</h2>

            <h3>Overview</h3>
            <p>Bank reconciliation matches your internal records with bank statements to ensure accuracy.</p>

            <h3>Setting Up Bank Accounts</h3>
            <ol>
                <li>Navigate to <strong>Bank</strong> &gt; <strong>Accounts</strong></li>
                <li>Click <strong>New Bank Account</strong></li>
                <li>Enter details:
                    <ul>
                        <li><strong>Account Name</strong> - Friendly name for the account</li>
                        <li><strong>Bank Name</strong> - Financial institution</li>
                        <li><strong>Account Number</strong> - Bank account number</li>
                        <li><strong>GL Account</strong> - Link to chart of accounts (e.g., 1000 Cash)</li>
                        <li><strong>Opening Balance</strong> - Starting balance</li>
                    </ul>
                </li>
            </ol>

            <h3>Importing Bank Statements</h3>
            <ol>
                <li>Navigate to <strong>Bank</strong> &gt; <strong>Import</strong></li>
                <li>Select the bank account</li>
                <li>Upload CSV file with transaction data</li>
                <li>Map columns to fields (Date, Description, Amount)</li>
                <li>Import transactions</li>
            </ol>

            <h3>Reconciliation Process</h3>
            <ol>
                <li>Navigate to <strong>Bank</strong> &gt; <strong>Reconciliation</strong></li>
                <li>Select bank account and date range</li>
                <li>Match bank statement lines with journal entries:
                    <ul>
                        <li>System suggests potential matches</li>
                        <li>Manually match remaining items</li>
                    </ul>
                </li>
                <li>Review unreconciled items</li>
                <li>Verify reconciled balance matches bank statement</li>
            </ol>
        </section>

        <!-- User Management Section -->
        <section id="user-management" class="section">
            <h2>User Management</h2>

            <div class="alert alert-info">
                Only users with the <strong>ADMIN</strong> role can access user management features.
            </div>

            <h3>Creating Users</h3>
            <ol>
                <li>Navigate to <strong>Users</strong> &gt; <strong>New User</strong></li>
                <li>Enter user details:
                    <ul>
                        <li><strong>Username</strong> - Unique login name</li>
                        <li><strong>Password</strong> - Minimum 8 characters recommended</li>
                        <li><strong>Email</strong> - Contact email</li>
                        <li><strong>Full Name</strong> - Display name</li>
                        <li><strong>Role</strong> - ADMIN, ACCOUNTANT, or VIEWER</li>
                    </ul>
                </li>
                <li>Click <strong>Save</strong></li>
            </ol>

            <h3>Managing Users</h3>
            <ul>
                <li><strong>Edit User</strong> - Update profile information</li>
                <li><strong>Change Password</strong> - Reset user password</li>
                <li><strong>Change Role</strong> - Modify access level</li>
                <li><strong>Disable User</strong> - Prevent login without deleting</li>
                <li><strong>Enable User</strong> - Restore disabled account</li>
            </ul>
        </section>

        <!-- Architecture Section -->
        <section id="architecture" class="section">
            <h2>System Architecture</h2>

            <h3>High-Level Architecture</h3>
            <div class="architecture-diagram">
                <div class="layer">
                    <div class="layer-title">Presentation Layer</div>
                    <div class="components">
                        <div class="component">Thymeleaf Templates</div>
                        <div class="component">Bootstrap 5 CSS</div>
                        <div class="component">JavaScript</div>
                    </div>
                </div>
                <div class="arrow">&#8595;</div>
                <div class="layer">
                    <div class="layer-title">Controller Layer</div>
                    <div class="components">
                        <div class="component">DashboardController</div>
                        <div class="component">AccountController</div>
                        <div class="component">JournalController</div>
                        <div class="component">ReportController</div>
                        <div class="component">InvoiceController</div>
                        <div class="component">BankReconciliationController</div>
                        <div class="component">UserController</div>
                    </div>
                </div>
                <div class="arrow">&#8595;</div>
                <div class="layer">
                    <div class="layer-title">Service Layer (Business Logic)</div>
                    <div class="components">
                        <div class="component">AccountService</div>
                        <div class="component">JournalService</div>
                        <div class="component">ReportService</div>
                        <div class="component">InvoiceService</div>
                        <div class="component">BankReconciliationService</div>
                        <div class="component">UserService</div>
                    </div>
                </div>
                <div class="arrow">&#8595;</div>
                <div class="layer">
                    <div class="layer-title">Repository Layer (Data Access)</div>
                    <div class="components">
                        <div class="component">AccountRepository</div>
                        <div class="component">JournalEntryRepository</div>
                        <div class="component">InvoiceRepository</div>
                        <div class="component">CustomerRepository</div>
                        <div class="component">BankAccountRepository</div>
                        <div class="component">UserRepository</div>
                    </div>
                </div>
                <div class="arrow">&#8595;</div>
                <div class="layer">
                    <div class="layer-title">Database Layer</div>
                    <div class="components">
                        <div class="component">MySQL (Production)</div>
                        <div class="component">H2 (Development)</div>
                    </div>
                </div>
            </div>

            <h3>Security Architecture</h3>
            <pre><code>Request Flow:
Browser -> Security Filter Chain -> Authentication -> Authorization -> Controller

Security Filter Chain:
1. DisableEncodeUrlFilter
2. SecurityContextHolderFilter
3. CsrfFilter
4. LogoutFilter
5. UsernamePasswordAuthenticationFilter
6. RequestCacheAwareFilter
7. AnonymousAuthenticationFilter
8. ExceptionTranslationFilter
9. AuthorizationFilter</code></pre>
        </section>

        <!-- Design Patterns Section -->
        <section id="design-patterns" class="section">
            <h2>Design Patterns</h2>

            <h3>Patterns Used</h3>

            <div class="card">
                <div class="card-header">1. MVC (Model-View-Controller)</div>
                <p>The application follows the Spring MVC pattern:</p>
                <ul>
                    <li><strong>Model</strong> - Entity classes (Account, JournalEntry, Invoice)</li>
                    <li><strong>View</strong> - Thymeleaf templates in <code>/templates</code></li>
                    <li><strong>Controller</strong> - @Controller annotated classes handling HTTP requests</li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">2. Repository Pattern</div>
                <p>Data access is abstracted through Spring Data JPA repositories:</p>
                <pre><code>@Repository
public interface AccountRepository extends JpaRepository&lt;Account, Long&gt; {
    Optional&lt;Account&gt; findByCode(String code);
    List&lt;Account&gt; findByAccountType(AccountType type);
}</code></pre>
            </div>

            <div class="card">
                <div class="card-header">3. Service Layer Pattern</div>
                <p>Business logic is encapsulated in service classes:</p>
                <pre><code>@Service
@RequiredArgsConstructor
public class JournalService {
    private final JournalEntryRepository journalEntryRepository;

    @Transactional
    public JournalEntry postEntry(Long id) {
        // Business logic here
    }
}</code></pre>
            </div>

            <div class="card">
                <div class="card-header">4. DTO (Data Transfer Object) Pattern</div>
                <p>DTOs transfer data between layers without exposing entities:</p>
                <pre><code>@Data
public class JournalEntryDTO {
    private Long id;
    private LocalDate entryDate;
    private List&lt;JournalEntryLineDTO&gt; lines;
}</code></pre>
            </div>

            <div class="card">
                <div class="card-header">5. Template Method Pattern</div>
                <p>Used in Thymeleaf layouts with <code>layout:decorate</code>:</p>
                <pre><code>&lt;html layout:decorate="~{layout/main}"&gt;
    &lt;div layout:fragment="content"&gt;
        &lt;!-- Page-specific content --&gt;
    &lt;/div&gt;
&lt;/html&gt;</code></pre>
            </div>

            <div class="card">
                <div class="card-header">6. Dependency Injection</div>
                <p>Constructor injection via Lombok's @RequiredArgsConstructor:</p>
                <pre><code>@Service
@RequiredArgsConstructor
public class AccountService {
    private final AccountRepository accountRepository;
    private final JournalEntryLineRepository journalEntryLineRepository;
}</code></pre>
            </div>
        </section>

        <!-- Database Schema Section -->
        <section id="database-schema" class="section">
            <h2>Database Schema</h2>

            <h3>Entity Relationship Overview</h3>

            <div class="erd-container">
                <div class="entity">
                    <div class="entity-header">users</div>
                    <div class="entity-body">
                        <div class="entity-field"><span class="field-name pk">id</span><span class="field-type">BIGINT PK</span></div>
                        <div class="entity-field"><span class="field-name">username</span><span class="field-type">VARCHAR(50)</span></div>
                        <div class="entity-field"><span class="field-name">password</span><span class="field-type">VARCHAR(255)</span></div>
                        <div class="entity-field"><span class="field-name">email</span><span class="field-type">VARCHAR(100)</span></div>
                        <div class="entity-field"><span class="field-name">full_name</span><span class="field-type">VARCHAR(100)</span></div>
                        <div class="entity-field"><span class="field-name fk">role_id</span><span class="field-type">BIGINT FK</span></div>
                        <div class="entity-field"><span class="field-name">enabled</span><span class="field-type">BOOLEAN</span></div>
                        <div class="entity-field"><span class="field-name">created_at</span><span class="field-type">DATETIME</span></div>
                    </div>
                </div>

                <div class="entity">
                    <div class="entity-header">accounts</div>
                    <div class="entity-body">
                        <div class="entity-field"><span class="field-name pk">id</span><span class="field-type">BIGINT PK</span></div>
                        <div class="entity-field"><span class="field-name">code</span><span class="field-type">VARCHAR(20) UNIQUE</span></div>
                        <div class="entity-field"><span class="field-name">name</span><span class="field-type">VARCHAR(100)</span></div>
                        <div class="entity-field"><span class="field-name">account_type</span><span class="field-type">ENUM</span></div>
                        <div class="entity-field"><span class="field-name fk">parent_id</span><span class="field-type">BIGINT FK</span></div>
                        <div class="entity-field"><span class="field-name fk">currency_id</span><span class="field-type">BIGINT FK</span></div>
                        <div class="entity-field"><span class="field-name">description</span><span class="field-type">TEXT</span></div>
                        <div class="entity-field"><span class="field-name">is_active</span><span class="field-type">BOOLEAN</span></div>
                    </div>
                </div>

                <div class="entity">
                    <div class="entity-header">journal_entries</div>
                    <div class="entity-body">
                        <div class="entity-field"><span class="field-name pk">id</span><span class="field-type">BIGINT PK</span></div>
                        <div class="entity-field"><span class="field-name">entry_number</span><span class="field-type">VARCHAR(20) UNIQUE</span></div>
                        <div class="entity-field"><span class="field-name">entry_date</span><span class="field-type">DATE</span></div>
                        <div class="entity-field"><span class="field-name">description</span><span class="field-type">TEXT</span></div>
                        <div class="entity-field"><span class="field-name">reference</span><span class="field-type">VARCHAR(100)</span></div>
                        <div class="entity-field"><span class="field-name">status</span><span class="field-type">ENUM</span></div>
                        <div class="entity-field"><span class="field-name fk">created_by</span><span class="field-type">BIGINT FK</span></div>
                        <div class="entity-field"><span class="field-name">posted_at</span><span class="field-type">DATETIME</span></div>
                    </div>
                </div>

                <div class="entity">
                    <div class="entity-header">journal_entry_lines</div>
                    <div class="entity-body">
                        <div class="entity-field"><span class="field-name pk">id</span><span class="field-type">BIGINT PK</span></div>
                        <div class="entity-field"><span class="field-name fk">journal_entry_id</span><span class="field-type">BIGINT FK</span></div>
                        <div class="entity-field"><span class="field-name fk">account_id</span><span class="field-type">BIGINT FK</span></div>
                        <div class="entity-field"><span class="field-name">debit_amount</span><span class="field-type">DECIMAL(15,2)</span></div>
                        <div class="entity-field"><span class="field-name">credit_amount</span><span class="field-type">DECIMAL(15,2)</span></div>
                        <div class="entity-field"><span class="field-name">exchange_rate</span><span class="field-type">DECIMAL(15,6)</span></div>
                        <div class="entity-field"><span class="field-name">description</span><span class="field-type">VARCHAR(255)</span></div>
                    </div>
                </div>

                <div class="entity">
                    <div class="entity-header">invoices</div>
                    <div class="entity-body">
                        <div class="entity-field"><span class="field-name pk">id</span><span class="field-type">BIGINT PK</span></div>
                        <div class="entity-field"><span class="field-name">invoice_number</span><span class="field-type">VARCHAR(20) UNIQUE</span></div>
                        <div class="entity-field"><span class="field-name fk">customer_id</span><span class="field-type">BIGINT FK</span></div>
                        <div class="entity-field"><span class="field-name">invoice_date</span><span class="field-type">DATE</span></div>
                        <div class="entity-field"><span class="field-name">due_date</span><span class="field-type">DATE</span></div>
                        <div class="entity-field"><span class="field-name">subtotal</span><span class="field-type">DECIMAL(15,2)</span></div>
                        <div class="entity-field"><span class="field-name">tax_amount</span><span class="field-type">DECIMAL(15,2)</span></div>
                        <div class="entity-field"><span class="field-name">total_amount</span><span class="field-type">DECIMAL(15,2)</span></div>
                        <div class="entity-field"><span class="field-name">status</span><span class="field-type">ENUM</span></div>
                    </div>
                </div>

                <div class="entity">
                    <div class="entity-header">customers</div>
                    <div class="entity-body">
                        <div class="entity-field"><span class="field-name pk">id</span><span class="field-type">BIGINT PK</span></div>
                        <div class="entity-field"><span class="field-name">code</span><span class="field-type">VARCHAR(20) UNIQUE</span></div>
                        <div class="entity-field"><span class="field-name">name</span><span class="field-type">VARCHAR(100)</span></div>
                        <div class="entity-field"><span class="field-name">email</span><span class="field-type">VARCHAR(100)</span></div>
                        <div class="entity-field"><span class="field-name">phone</span><span class="field-type">VARCHAR(20)</span></div>
                        <div class="entity-field"><span class="field-name">address</span><span class="field-type">TEXT</span></div>
                        <div class="entity-field"><span class="field-name">tax_id</span><span class="field-type">VARCHAR(50)</span></div>
                    </div>
                </div>

                <div class="entity">
                    <div class="entity-header">bank_accounts</div>
                    <div class="entity-body">
                        <div class="entity-field"><span class="field-name pk">id</span><span class="field-type">BIGINT PK</span></div>
                        <div class="entity-field"><span class="field-name">account_name</span><span class="field-type">VARCHAR(100)</span></div>
                        <div class="entity-field"><span class="field-name">bank_name</span><span class="field-type">VARCHAR(100)</span></div>
                        <div class="entity-field"><span class="field-name">account_number</span><span class="field-type">VARCHAR(50)</span></div>
                        <div class="entity-field"><span class="field-name fk">gl_account_id</span><span class="field-type">BIGINT FK</span></div>
                        <div class="entity-field"><span class="field-name">opening_balance</span><span class="field-type">DECIMAL(15,2)</span></div>
                        <div class="entity-field"><span class="field-name">current_balance</span><span class="field-type">DECIMAL(15,2)</span></div>
                    </div>
                </div>

                <div class="entity">
                    <div class="entity-header">currencies</div>
                    <div class="entity-body">
                        <div class="entity-field"><span class="field-name pk">id</span><span class="field-type">BIGINT PK</span></div>
                        <div class="entity-field"><span class="field-name">code</span><span class="field-type">VARCHAR(3) UNIQUE</span></div>
                        <div class="entity-field"><span class="field-name">name</span><span class="field-type">VARCHAR(50)</span></div>
                        <div class="entity-field"><span class="field-name">symbol</span><span class="field-type">VARCHAR(5)</span></div>
                        <div class="entity-field"><span class="field-name">exchange_rate</span><span class="field-type">DECIMAL(15,6)</span></div>
                        <div class="entity-field"><span class="field-name">is_base</span><span class="field-type">BOOLEAN</span></div>
                    </div>
                </div>
            </div>

            <h3>Key Relationships</h3>
            <table>
                <tr>
                    <th>Relationship</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>User -> Role</td>
                    <td>Many-to-One</td>
                    <td>Each user has one role</td>
                </tr>
                <tr>
                    <td>Account -> Account</td>
                    <td>Self-referential</td>
                    <td>Hierarchical account structure</td>
                </tr>
                <tr>
                    <td>JournalEntry -> JournalEntryLine</td>
                    <td>One-to-Many</td>
                    <td>Each entry has multiple lines</td>
                </tr>
                <tr>
                    <td>JournalEntryLine -> Account</td>
                    <td>Many-to-One</td>
                    <td>Each line references one account</td>
                </tr>
                <tr>
                    <td>Invoice -> Customer</td>
                    <td>Many-to-One</td>
                    <td>Each invoice belongs to one customer</td>
                </tr>
                <tr>
                    <td>Invoice -> InvoiceItem</td>
                    <td>One-to-Many</td>
                    <td>Each invoice has multiple items</td>
                </tr>
                <tr>
                    <td>BankAccount -> Account</td>
                    <td>Many-to-One</td>
                    <td>Bank account linked to GL account</td>
                </tr>
                <tr>
                    <td>BankStatement -> BankAccount</td>
                    <td>Many-to-One</td>
                    <td>Statements belong to bank account</td>
                </tr>
            </table>
        </section>

        <!-- API Reference Section -->
        <section id="api-reference" class="section">
            <h2>API Reference</h2>

            <h3>URL Endpoints</h3>

            <h4>Authentication</h4>
            <table>
                <tr>
                    <th>Method</th>
                    <th>URL</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/login</td>
                    <td>Login page</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/login</td>
                    <td>Process login</td>
                </tr>
                <tr>
                    <td>GET/POST</td>
                    <td>/logout</td>
                    <td>Logout user</td>
                </tr>
            </table>

            <h4>Dashboard</h4>
            <table>
                <tr>
                    <th>Method</th>
                    <th>URL</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/, /dashboard</td>
                    <td>Main dashboard</td>
                </tr>
            </table>

            <h4>Accounts</h4>
            <table>
                <tr>
                    <th>Method</th>
                    <th>URL</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/accounts</td>
                    <td>List active accounts</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/accounts/all</td>
                    <td>List all accounts (including inactive)</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/accounts/new</td>
                    <td>New account form</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/accounts/save</td>
                    <td>Save account</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/accounts/edit/{id}</td>
                    <td>Edit account form</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/accounts/view/{id}</td>
                    <td>View account details</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/accounts/deactivate/{id}</td>
                    <td>Deactivate account</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/accounts/activate/{id}</td>
                    <td>Activate account</td>
                </tr>
            </table>

            <h4>Journal Entries</h4>
            <table>
                <tr>
                    <th>Method</th>
                    <th>URL</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/journal</td>
                    <td>List journal entries (paginated)</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/journal/new</td>
                    <td>New entry form</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/journal/save</td>
                    <td>Save entry</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/journal/edit/{id}</td>
                    <td>Edit entry form</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/journal/view/{id}</td>
                    <td>View entry details</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/journal/post/{id}</td>
                    <td>Post entry</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/journal/void/{id}</td>
                    <td>Void entry</td>
                </tr>
                <tr>
                    <td>POST</td>
                    <td>/journal/delete/{id}</td>
                    <td>Delete draft entry</td>
                </tr>
            </table>

            <h4>Reports</h4>
            <table>
                <tr>
                    <th>Method</th>
                    <th>URL</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/reports</td>
                    <td>Reports index</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/reports/trial-balance</td>
                    <td>Trial balance report</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/reports/profit-loss</td>
                    <td>Profit & loss report</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/reports/balance-sheet</td>
                    <td>Balance sheet report</td>
                </tr>
                <tr>
                    <td>GET</td>
                    <td>/reports/general-ledger</td>
                    <td>General ledger report</td>
                </tr>
            </table>
        </section>

        <!-- Code Structure Section -->
        <section id="code-structure" class="section">
            <h2>Code Structure</h2>

            <h3>Project Directory Structure</h3>
            <pre><code>accounting-system/
├── pom.xml                              # Maven configuration
├── src/
│   ├── main/
│   │   ├── java/com/accounting/
│   │   │   ├── AccountingApplication.java    # Main entry point
│   │   │   ├── config/
│   │   │   │   ├── SecurityConfig.java       # Spring Security config
│   │   │   │   └── WebConfig.java            # Web MVC config
│   │   │   ├── controller/
│   │   │   │   ├── AuthController.java
│   │   │   │   ├── DashboardController.java
│   │   │   │   ├── AccountController.java
│   │   │   │   ├── JournalController.java
│   │   │   │   ├── LedgerController.java
│   │   │   │   ├── ReportController.java
│   │   │   │   ├── InvoiceController.java
│   │   │   │   ├── BankReconciliationController.java
│   │   │   │   └── UserController.java
│   │   │   ├── dto/
│   │   │   │   ├── JournalEntryDTO.java
│   │   │   │   ├── TrialBalanceDTO.java
│   │   │   │   ├── ProfitLossDTO.java
│   │   │   │   ├── BalanceSheetDTO.java
│   │   │   │   └── DashboardDTO.java
│   │   │   ├── exception/
│   │   │   │   ├── AccountingException.java
│   │   │   │   └── GlobalExceptionHandler.java
│   │   │   ├── model/
│   │   │   │   ├── User.java
│   │   │   │   ├── Role.java
│   │   │   │   ├── Account.java
│   │   │   │   ├── AccountType.java
│   │   │   │   ├── Currency.java
│   │   │   │   ├── JournalEntry.java
│   │   │   │   ├── JournalEntryLine.java
│   │   │   │   ├── EntryStatus.java
│   │   │   │   ├── Customer.java
│   │   │   │   ├── Invoice.java
│   │   │   │   ├── InvoiceItem.java
│   │   │   │   ├── InvoiceStatus.java
│   │   │   │   ├── BankAccount.java
│   │   │   │   ├── BankStatement.java
│   │   │   │   └── FiscalYear.java
│   │   │   ├── repository/
│   │   │   │   ├── UserRepository.java
│   │   │   │   ├── RoleRepository.java
│   │   │   │   ├── AccountRepository.java
│   │   │   │   ├── JournalEntryRepository.java
│   │   │   │   ├── JournalEntryLineRepository.java
│   │   │   │   └── ... (other repositories)
│   │   │   └── service/
│   │   │       ├── UserService.java
│   │   │       ├── AccountService.java
│   │   │       ├── JournalService.java
│   │   │       ├── ReportService.java
│   │   │       ├── InvoiceService.java
│   │   │       └── BankReconciliationService.java
│   │   └── resources/
│   │       ├── application.properties        # Application config
│   │       ├── static/                       # CSS, JS, images
│   │       └── templates/                    # Thymeleaf templates
│   │           ├── layout/main.html
│   │           ├── auth/login.html
│   │           ├── dashboard.html
│   │           ├── accounts/
│   │           ├── journal/
│   │           ├── invoices/
│   │           ├── reports/
│   │           ├── bank/
│   │           └── users/
│   └── test/
│       └── java/com/accounting/              # Test classes
└── data/                                     # H2 database files (dev)</code></pre>
        </section>

        <!-- Configuration Section -->
        <section id="configuration" class="section">
            <h2>Configuration</h2>

            <h3>application.properties</h3>

            <h4>Server Configuration</h4>
            <pre><code># Application name and port
spring.application.name=accounting-system
server.port=8080</code></pre>

            <h4>Database Configuration (H2 - Development)</h4>
            <pre><code># H2 Database
spring.datasource.url=jdbc:h2:file:./data/accounting_db;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console</code></pre>

            <h4>Database Configuration (MySQL - Production)</h4>
            <pre><code># MySQL Database
spring.datasource.url=jdbc:mysql://localhost:3306/accounting_db?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect</code></pre>

            <h4>JPA/Hibernate Configuration</h4>
            <pre><code># JPA Configuration
spring.jpa.hibernate.ddl-auto=update      # auto-create/update schema
spring.jpa.show-sql=false                 # set to true for debugging
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false             # best practice

# SQL Initialization
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true</code></pre>

            <h4>Security Configuration</h4>
            <pre><code># Default security credentials (change in production!)
spring.security.user.name=admin
spring.security.user.password=admin</code></pre>

            <h4>Logging Configuration</h4>
            <pre><code># Logging levels
logging.level.org.springframework.security=INFO
logging.level.com.accounting=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE</code></pre>

            <h4>File Upload Configuration</h4>
            <pre><code># File upload limits
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB</code></pre>

            <h3>Environment Variables</h3>
            <p>Override configuration using environment variables:</p>
            <pre><code># Database
export SPRING_DATASOURCE_URL=jdbc:mysql://production-host:3306/accounting_db
export SPRING_DATASOURCE_USERNAME=prod_user
export SPRING_DATASOURCE_PASSWORD=secure_password

# Server
export SERVER_PORT=80

# Logging
export LOGGING_LEVEL_COM_ACCOUNTING=WARN</code></pre>
        </section>

        <!-- Deployment Section -->
        <section id="deployment" class="section">
            <h2>Deployment</h2>

            <h3>Building for Production</h3>
            <pre><code># Clean build with tests
mvn clean package

# Skip tests for faster build
mvn clean package -DskipTests

# The JAR will be at: target/accounting-system-1.0.0-SNAPSHOT.jar</code></pre>

            <h3>Running in Production</h3>
            <pre><code># Basic run
java -jar accounting-system-1.0.0-SNAPSHOT.jar

# With custom configuration
java -jar accounting-system-1.0.0-SNAPSHOT.jar \
  --spring.datasource.url=jdbc:mysql://db-host:3306/accounting_db \
  --spring.datasource.username=prod_user \
  --spring.datasource.password=secret

# With production profile
java -jar accounting-system-1.0.0-SNAPSHOT.jar --spring.profiles.active=production</code></pre>

            <h3>Systemd Service (Linux)</h3>
            <pre><code># /etc/systemd/system/accounting.service

[Unit]
Description=Double Entry Accounting System
After=syslog.target network.target mysql.service

[Service]
User=accounting
Group=accounting
WorkingDirectory=/opt/accounting
ExecStart=/usr/bin/java -jar accounting-system-1.0.0-SNAPSHOT.jar
SuccessExitStatus=143
TimeoutStopSec=10
Restart=on-failure
RestartSec=5

[Install]
WantedBy=multi-user.target</code></pre>

            <pre><code># Enable and start service
sudo systemctl daemon-reload
sudo systemctl enable accounting
sudo systemctl start accounting
sudo systemctl status accounting</code></pre>

            <h3>Docker Deployment</h3>
            <pre><code># Dockerfile
FROM eclipse-temurin:17-jre-alpine
WORKDIR /app
COPY target/accounting-system-1.0.0-SNAPSHOT.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]</code></pre>

            <pre><code># Build and run
docker build -t accounting-system .
docker run -d -p 8080:8080 \
  -e SPRING_DATASOURCE_URL=jdbc:mysql://db:3306/accounting_db \
  -e SPRING_DATASOURCE_USERNAME=user \
  -e SPRING_DATASOURCE_PASSWORD=password \
  accounting-system</code></pre>
        </section>

        <!-- Maintenance Section -->
        <section id="maintenance" class="section">
            <h2>Maintenance</h2>

            <h3>Database Backup</h3>

            <h4>MySQL Backup</h4>
            <pre><code># Full backup
mysqldump -u root -p accounting_db > backup_$(date +%Y%m%d_%H%M%S).sql

# Compressed backup
mysqldump -u root -p accounting_db | gzip > backup_$(date +%Y%m%d_%H%M%S).sql.gz

# Restore
mysql -u root -p accounting_db < backup_20240101_120000.sql</code></pre>

            <h4>H2 Backup</h4>
            <pre><code># Copy the database files
cp -r data/ backup/data_$(date +%Y%m%d_%H%M%S)/</code></pre>

            <h3>Log Management</h3>
            <pre><code># Configure log rotation in application.properties
logging.file.name=logs/accounting.log
logging.file.max-size=10MB
logging.file.max-history=30</code></pre>

            <h3>Regular Maintenance Tasks</h3>
            <table>
                <tr>
                    <th>Task</th>
                    <th>Frequency</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Database Backup</td>
                    <td>Daily</td>
                    <td>Full database backup</td>
                </tr>
                <tr>
                    <td>Log Rotation</td>
                    <td>Weekly</td>
                    <td>Archive old log files</td>
                </tr>
                <tr>
                    <td>Overdue Invoice Check</td>
                    <td>Daily</td>
                    <td>Update invoice statuses</td>
                </tr>
                <tr>
                    <td>Security Updates</td>
                    <td>Monthly</td>
                    <td>Update dependencies</td>
                </tr>
                <tr>
                    <td>Performance Review</td>
                    <td>Quarterly</td>
                    <td>Database optimization</td>
                </tr>
            </table>

            <h3>Updating the Application</h3>
            <pre><code># 1. Backup current version
cp accounting-system-1.0.0-SNAPSHOT.jar accounting-system-1.0.0-SNAPSHOT.jar.bak

# 2. Backup database
mysqldump -u root -p accounting_db > pre_update_backup.sql

# 3. Stop the service
sudo systemctl stop accounting

# 4. Deploy new version
cp new-version.jar accounting-system-1.0.0-SNAPSHOT.jar

# 5. Start the service
sudo systemctl start accounting

# 6. Verify
curl http://localhost:8080/actuator/health</code></pre>
        </section>

        <!-- Troubleshooting Section -->
        <section id="troubleshooting" class="section">
            <h2>Troubleshooting</h2>

            <h3>Common Issues and Solutions</h3>

            <div class="card">
                <div class="card-header">Application Won't Start</div>
                <p><strong>Symptoms:</strong> Application fails to start with error messages</p>
                <p><strong>Possible Causes and Solutions:</strong></p>
                <ul>
                    <li><strong>Port already in use:</strong>
                        <pre><code># Check what's using port 8080
lsof -i :8080

# Kill the process or use different port
java -jar app.jar --server.port=8081</code></pre>
                    </li>
                    <li><strong>Database connection failed:</strong>
                        <pre><code># Check MySQL is running
sudo systemctl status mysql

# Verify credentials
mysql -u username -p -h hostname</code></pre>
                    </li>
                    <li><strong>Java version mismatch:</strong>
                        <pre><code># Check Java version (must be 17+)
java -version</code></pre>
                    </li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">Login Issues</div>
                <p><strong>Symptoms:</strong> Unable to log in with correct credentials</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>Clear browser cookies and cache</li>
                    <li>Check if user account is enabled in the database</li>
                    <li>Verify password is correctly encoded (BCrypt)</li>
                    <li>Check Spring Security debug logs:
                        <pre><code>logging.level.org.springframework.security=DEBUG</code></pre>
                    </li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">Journal Entry Won't Balance</div>
                <p><strong>Symptoms:</strong> Error "Journal entry must balance"</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>Verify total debits equal total credits</li>
                    <li>Check for decimal precision issues</li>
                    <li>Ensure no empty amounts in lines</li>
                    <li>Remove any lines with both debit and credit</li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">Reports Showing Wrong Data</div>
                <p><strong>Symptoms:</strong> Financial reports don't match expectations</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>Check that journal entries are posted (not just drafts)</li>
                    <li>Verify date ranges for period-based reports</li>
                    <li>Confirm account types are correctly assigned</li>
                    <li>Review voided entries (they shouldn't affect balances)</li>
                </ul>
            </div>

            <div class="card">
                <div class="card-header">Performance Issues</div>
                <p><strong>Symptoms:</strong> Slow page loads, timeouts</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>Check database indexes:
                        <pre><code>SHOW INDEX FROM journal_entries;
SHOW INDEX FROM journal_entry_lines;</code></pre>
                    </li>
                    <li>Optimize queries with pagination</li>
                    <li>Increase JVM heap size:
                        <pre><code>java -Xmx2g -jar app.jar</code></pre>
                    </li>
                    <li>Enable connection pooling (HikariCP is default)</li>
                </ul>
            </div>

            <h3>Viewing Logs</h3>
            <pre><code># Application logs (if configured)
tail -f logs/accounting.log

# Systemd journal
journalctl -u accounting -f

# Docker logs
docker logs -f container_name</code></pre>

            <h3>Database Debugging</h3>
            <pre><code># H2 Console (development)
URL: http://localhost:8080/h2-console
JDBC URL: jdbc:h2:file:./data/accounting_db
User: sa
Password: (empty)

# MySQL queries
SELECT * FROM journal_entries WHERE status = 'POSTED' ORDER BY entry_date DESC LIMIT 10;
SELECT account_id, SUM(debit_amount), SUM(credit_amount) FROM journal_entry_lines GROUP BY account_id;</code></pre>

            <h3>Getting Help</h3>
            <ul>
                <li>Check the application logs for detailed error messages</li>
                <li>Enable DEBUG logging for specific packages</li>
                <li>Review the Spring Boot documentation</li>
                <li>Check database connectivity independently</li>
            </ul>
        </section>

        <!-- Footer -->
        <footer style="margin-top: 60px; padding: 40px 0; border-top: 1px solid var(--border-color); text-align: center; color: var(--text-muted);">
            <p>Double Entry Accounting System Documentation v1.0.0</p>
            <p>Built with Spring Boot 3.2.0 | Java 17</p>
            <p>Generated on January 2026</p>
        </footer>
    </main>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    // Update active state
                    document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        // Highlight active section on scroll
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('.section');
            const navLinks = document.querySelectorAll('.nav-link');

            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.pageYOffset >= sectionTop - 100) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>